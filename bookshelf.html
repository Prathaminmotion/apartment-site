<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bookshelf</title>
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Literata:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0e14;
    --paper:#f4ecd8;
    --paper-edge:#e1d4b7;
    --ink:#2a241a;
    --muted:#6e6354;
    --ui:#141a24;
    --ui-b:#232c3b;
    --shadow:rgba(0,0,0,.5);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1000px 520px at 70% 15%, rgba(255,178,120,.06), transparent 60%), var(--bg);
    color:#eaeaea;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    overflow-x:hidden;
  }

  /* Header */
  header{
    padding:14px 18px 8px;
    display:flex; align-items:center; gap:12px; flex-wrap:wrap;
  }
  .crumb{opacity:.8}
  .hint{margin-left:auto; opacity:.6; font-size:.92rem}

  /* Bookshelf background */
  .frame{
    position:relative;
    width:min(1050px, 95vw);
    aspect-ratio: 16/10; /* helps layout while image loads */
    margin:10px auto 70px;
    background: #2b2016 url('bookshelf.png') center/cover no-repeat;
    border-radius: 14px;
    box-shadow: 0 28px 60px var(--shadow);
    overflow:hidden;
  }
  /* Hotspot rows (4 shelves) */
  .row{
    position:absolute; left:3.5%; right:3.5%;
    height:18.5%;
    display:grid; grid-template-columns: repeat(16, 1fr);
    align-items:end; gap:6px;
  }
  .row[data-i="0"]{ top:8.5% }   /* top shelf */
  .row[data-i="1"]{ top:31.5% }
  .row[data-i="2"]{ top:54.3% }
  .row[data-i="3"]{ top:77% }    /* bottom shelf */

  /* Clickable ‚Äúspines‚Äù (they just trigger a random pick within the row‚Äôs series) */
  .spine{
    height:74%;
    border-radius:7px;
    background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(0,0,0,.18));
    opacity:0; /* invisible but hoverable; set to .12 for debugging */
    cursor:pointer;
    transition: transform .12s ease, opacity .12s ease;
  }
  .spine:hover{ transform: translateY(-3px) }

  /* Series label chips (optional helper) */
  .chip{
    position:absolute; left:8px; top:8px;
    background: rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.15);
    color:#f3e8d1; padding:4px 8px; font-size:12px; border-radius:999px;
    backdrop-filter: blur(2px);
  }

  /* Paper card (book detail) */
  .card{
    position:fixed; left:50%; bottom:34px; translate:-50% 0;
    width:min(720px, 92vw);
    background:
      linear-gradient(180deg, var(--paper), var(--paper-edge)),
      repeating-linear-gradient(0deg, rgba(0,0,0,.02) 0, rgba(0,0,0,.02) 2px, transparent 2px, transparent 6px);
    color:var(--ink);
    border-radius:14px; padding:18px;
    box-shadow: 0 32px 70px rgba(0,0,0,.6), inset 0 2px 0 rgba(255,255,255,.4);
    display:none;
    z-index:50;
  }
  .card.open{ display:block; animation:pop .14s ease-out }
  @keyframes pop{ from{ transform:scale(.98); opacity:0 } to{ transform:scale(1); opacity:1 } }
  .card h2{ margin:.2rem 0 .25rem; font-family:"Literata", serif; font-weight:600 }
  .meta{ font-family:"Literata", serif; color:var(--muted); margin-bottom:.4rem }
  .syn{ font-family:"Patrick Hand", ui-rounded; font-size:1.1rem; color:#2d261b; line-height:1.35 }
  .rowbtns{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap }
  .btn{
    background:var(--ui); color:#dae3f5; border:1px solid var(--ui-b);
    padding:8px 12px; border-radius:10px; cursor:pointer;
  }

  /* All books modal */
  .overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.55);
    display:none; z-index:60;
  }
  .overlay.open{ display:block }
  .panel{
    position:fixed; left:50%; top:50%; translate:-50% -50%;
    width:min(900px, 96vw); max-height:80vh; overflow:auto;
    background:#101520; color:#e7edf6; border:1px solid #2a3446; border-radius:14px;
    box-shadow: 0 28px 60px rgba(0,0,0,.6);
    padding:14px;
  }
  .panel h3{ margin:6px 0 10px }
  .controls{ display:flex; gap:10px; align-items:center; margin-bottom:8px; flex-wrap:wrap }
  select, input{
    background:#0f141e; color:#dbe4f6; border:1px solid #243049; border-radius:10px; padding:8px 10px;
  }
  table{ width:100%; border-collapse:collapse; font-size:.98rem }
  th, td{ padding:8px 10px; border-bottom:1px solid #1f2837 }
  th{ text-align:left; color:#a9b6cf; position:sticky; top:0; background:#0f141e }

  /* Dot button */
  .dot{
    position:fixed; right:16px; bottom:16px; z-index:40;
    width:18px; height:18px; border-radius:50%;
    background:#e9c46a; box-shadow: 0 6px 14px rgba(0,0,0,.45);
    cursor:pointer;
  }

  /* Close X */
  .x{
    background:#1b2330; border:1px solid #313c52; color:#d9e6ff;
    border-radius:9px; padding:6px 10px; cursor:pointer; margin-left:auto;
  }
</style>
</head>
<body>
  <header>
    <div class="crumb">üìö Bookshelf</div>
    <div class="hint">Click any book on a row to get a random pick from that series.</div>
  </header>

  <main class="frame" id="frame">
    <!-- Series chips (you can change which series maps to which row here) -->
    <div class="chip" style="top:6%;">Harry Potter</div>
    <div class="chip" style="top:28.5%;">Percy Jackson & the Olympians</div>
    <div class="chip" style="top:51.2%;">Wings of Fire (Arc 1)</div>
    <div class="chip" style="top:74%;">Diary of a Wimpy Kid</div>

    <!-- 4 rows of hotspots, each row has 16 ‚Äúspines‚Äù to click -->
    <div class="row" data-i="0"></div>
    <div class="row" data-i="1"></div>
    <div class="row" data-i="2"></div>
    <div class="row" data-i="3"></div>
  </main>

  <!-- Paper card -->
  <section class="card" id="card">
    <h2 id="c-title">Title</h2>
    <div class="meta" id="c-meta">by Author ‚Ä¢ #1 in Series</div>
    <p class="syn" id="c-syn">Series synopsis.</p>
    <div class="rowbtns">
      <button class="btn" id="another">Another random from this series</button>
      <button class="btn" id="close">Close</button>
    </div>
  </section>

  <!-- All books modal -->
  <div class="overlay" id="ovl">
    <div class="panel">
      <div style="display:flex; align-items:center; gap:10px">
        <h3 style="margin:0">All Books</h3>
        <button class="x" id="ovlClose">Close</button>
      </div>
      <div class="controls">
        <label>Sort by:
          <select id="sortSel">
            <option value="title">Title (A‚ÜíZ)</option>
            <option value="author">Author (A‚ÜíZ)</option>
          </select>
        </label>
        <input id="filter" placeholder="Search‚Ä¶" />
      </div>
      <table id="tbl">
        <thead><tr><th>Title</th><th>Author</th><th>Series</th><th>#</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Dot to open All Books -->
  <div class="dot" id="dot" title="All books"></div>

<script>
/* ===== Data =====
   You can edit the series mapping or add more titles later.
   Each series includes: series title, author, series synopsis, and a list of books (title + number).
*/
const SERIES = [
  {
    id: "hp",
    row: 0,
    series: "Harry Potter",
    author: "J.K. Rowling",
    synopsis: "A boy wizard and his friends come of age at Hogwarts while facing the dark rise of Lord Voldemort.",
    books: [
      {title:"Harry Potter and the Sorcerer's Stone", no:1},
      {title:"Harry Potter and the Chamber of Secrets", no:2},
      {title:"Harry Potter and the Prisoner of Azkaban", no:3},
      {title:"Harry Potter and the Goblet of Fire", no:4},
      {title:"Harry Potter and the Order of the Phoenix", no:5},
      {title:"Harry Potter and the Half-Blood Prince", no:6},
      {title:"Harry Potter and the Deathly Hallows", no:7}
    ]
  },
  {
    id: "pjo",
    row: 1,
    series: "Percy Jackson & the Olympians",
    author: "Rick Riordan",
    synopsis: "A modern demigod learns he‚Äôs Poseidon's son and undertakes mythic quests to prevent wars among the gods.",
    books: [
      {title:"The Lightning Thief", no:1},
      {title:"The Sea of Monsters", no:2},
      {title:"The Titan's Curse", no:3},
      {title:"The Battle of the Labyrinth", no:4},
      {title:"The Last Olympian", no:5}
    ]
  },
  {
    id: "wof",
    row: 2,
    series: "Wings of Fire (Arc 1)",
    author: "Tui T. Sutherland",
    synopsis: "Five dragonets foretold to end a continent‚Äëspanning war must choose between prophecy and forging their own destiny.",
    books: [
      {title:"The Dragonet Prophecy", no:1},
      {title:"The Lost Heir", no:2},
      {title:"The Hidden Kingdom", no:3},
      {title:"The Dark Secret", no:4},
      {title:"The Brightest Night", no:5}
    ]
  },
  {
    id: "wimpy",
    row: 3,
    series: "Diary of a Wimpy Kid",
    author: "Jeff Kinney",
    synopsis: "Greg Heffley‚Äôs illustrated journals capture the hilarious everyday disasters of middle school life.",
    books: [
      {title:"Diary of a Wimpy Kid", no:1},
      {title:"Rodrick Rules", no:2},
      {title:"The Last Straw", no:3},
      {title:"Dog Days", no:4},
      {title:"The Ugly Truth", no:5}
    ]
  },
  /* Optional extras (included in All Books table) */
  {
    id: "bignite",
    row: null, /* not mapped to a shelf row */
    series: "Big Nate",
    author: "Lincoln Peirce",
    synopsis: "A wisecracking sixth‚Äëgrader turns everyday chaos into laugh‚Äëout‚Äëloud adventures.",
    books: [
      {title:"Big Nate: In a Class by Himself", no:1},
      {title:"Big Nate Strikes Again", no:2},
      {title:"Big Nate on a Roll", no:3}
    ]
  },
  {
    id: "jp",
    row: null,
    series: "Jurassic Park",
    author: "Michael Crichton",
    synopsis: "A biotech breakthrough resurrects dinosaurs, proving nature and hubris are a lethal mix.",
    books: [
      {title:"Jurassic Park", no:1},
      {title:"The Lost World", no:2}
    ]
  }
];

/* ===== Build shelf hotspots ===== */
const rows = [...document.querySelectorAll('.row')];
rows.forEach((row,i)=>{
  for(let c=0;c<16;c++){
    const s=document.createElement('div');
    s.className='spine';
    // give subtle height variation to match drawn vibe
    s.style.height = (68 + Math.floor(Math.random()*18)) + '%';
    s.dataset.row=i;
    row.appendChild(s);
  }
});

/* ===== Card logic ===== */
const card = document.getElementById('card');
const cTitle = document.getElementById('c-title');
const cMeta = document.getElementById('c-meta');
const cSyn = document.getElementById('c-syn');
const btnAnother = document.getElementById('another');
const btnClose = document.getElementById('close');

let currentSeries = null;

function randomFrom(arr){ return arr[Math.floor(Math.random()*arr.length)] }

function openRandomForSeries(seriesId){
  const S = SERIES.find(s=>s.id===seriesId);
  if(!S) return;
  currentSeries = S;
  const pick = randomFrom(S.books);
  cTitle.textContent = pick.title;
  cMeta.textContent  = `by ${S.author} ‚Ä¢ #${pick.no} in ${S.series}`;
  cSyn.textContent   = S.synopsis;
  card.classList.add('open');
}

btnAnother.addEventListener('click', ()=>{ if(currentSeries) openRandomForSeries(currentSeries.id) });
btnClose.addEventListener('click', ()=> card.classList.remove('open'));
window.addEventListener('keydown', e=>{ if(e.key==='Escape') card.classList.remove('open') });

/* Click on any spine resolves its row -> series */
document.getElementById('frame').addEventListener('click', (e)=>{
  const spine = e.target.closest('.spine');
  if(!spine) return;
  const rowIndex = Number(spine.dataset.row);
  const seriesForRow = SERIES.find(s=>s.row===rowIndex);
  if(seriesForRow){ openRandomForSeries(seriesForRow.id) }
});

/* ===== All Books modal ===== */
const dot = document.getElementById('dot');
const ovl = document.getElementById('ovl');
const ovlClose = document.getElementById('ovlClose');
const sortSel = document.getElementById('sortSel');
const filter = document.getElementById('filter');
const tbody = document.querySelector('#tbl tbody');

function flattenBooks(){
  const rows=[];
  SERIES.forEach(S=>{
    S.books.forEach(b=>{
      rows.push({ title:b.title, author:S.author, series:S.series, no:b.no });
    });
  });
  return rows;
}
let TABLE = flattenBooks();

function renderTable(){
  const q = filter.value.trim().toLowerCase();
  let list = TABLE.filter(r =>
    !q || r.title.toLowerCase().includes(q) || r.author.toLowerCase().includes(q) || r.series.toLowerCase().includes(q)
  );
  list.sort((a,b)=> String(a[sortSel.value]).localeCompare(String(b[sortSel.value])));
  tbody.innerHTML='';
  list.forEach(r=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td>${r.title}</td><td>${r.author}</td><td>${r.series}</td><td>${r.no}</td>`;
    tbody.appendChild(tr);
  });
}

dot.addEventListener('click', ()=>{ ovl.classList.add('open'); renderTable() });
ovlClose.addEventListener('click', ()=> ovl.classList.remove('open'));
sortSel.addEventListener('change', renderTable);
filter.addEventListener('input', renderTable);

/* Accessibility: click outside panel to close */
ovl.addEventListener('click', e=>{
  if(e.target===ovl) ovl.classList.remove('open');
});

/* ===== End ===== */
</script>
</body>
</html>
