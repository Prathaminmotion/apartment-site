<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Deluxe Bookshelf</title>

<!-- Handwritten + serif for the paper card; will gracefully fall back if blocked -->
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand:wght@400&family=Literata:opsz,wght@14..72,400;14..72,600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0b0e14;            /* page */
    --ink:#e9e4da;           /* paper text */
    --paper:#f4ecd8;         /* paper */
    --paper-edge:#d9cdb2;
    --wood1:#5b3f2a;
    --wood2:#875d3b;
    --wood3:#6a4a31;
    --shadow:rgba(0,0,0,.45);
    --accent:#7aa2ff;        /* subtle UI accent */
    --muted:#9aa4b2;
  }
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 600px at 70% 20%, rgba(255,188,120,.06), transparent 60%),
                radial-gradient(900px 500px at 35% 75%, rgba(255,188,120,.04), transparent 60%),
                var(--bg);
    color:#eee;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    display:flex; flex-direction:column; gap:18px;
  }

  /* --- Top bar --- */
  .toolbar{
    display:flex; gap:10px; align-items:center;
    padding:16px clamp(12px, 4vw, 28px) 0;
    flex-wrap:wrap;
  }
  .toolbar .title{
    font-weight:600; opacity:.9; margin-right:auto;
    letter-spacing:.3px
  }
  .field, .btn, select{
    background:#121720;
    border:1px solid #212938;
    color:#d9dfeb;
    border-radius:999px;
    padding:10px 14px;
    outline:none; box-shadow:0 4px 14px rgba(0,0,0,.2) inset;
  }
  .field{ width:min(420px, 70vw)}
  .btn{ cursor:pointer }
  .btn:active{ transform:translateY(1px) }

  /* --- Shelf wrapper --- */
  .shelf-wrap{
    padding:0 clamp(12px, 4vw, 28px) 40px;
  }

  /* Wood grain using layered gradients + noise */
  .shelf{
    position:relative;
    margin:0 auto;
    max-width:1100px;
    min-height:210px;
    border-radius:16px;
    background:
      /* vertical faint planks */
      repeating-linear-gradient(90deg,
        rgba(0,0,0,.05) 0px, rgba(0,0,0,.05) 2px,
        transparent 2px, transparent 38px),
      /* soft vignette */
      radial-gradient(120% 140% at 20% 0%, rgba(255,214,163,.06), transparent 60%),
      linear-gradient(180deg, var(--wood2), var(--wood1) 60%, var(--wood3));
    box-shadow:
      0 22px 40px var(--shadow),
      inset 0 1px 0 rgba(255,255,255,.08),
      inset 0 -8px 18px rgba(0,0,0,.25);
    padding:24px 22px;
    display:flex; align-items:flex-end; gap:10px; overflow:hidden;
  }

  /* subtle top bevel */
  .shelf:before{
    content:"";
    position:absolute; inset:0 0 auto 0; height:18px; border-radius:16px 16px 0 0;
    background:linear-gradient(180deg, rgba(255,255,255,.25), rgba(255,255,255,0));
    mix-blend-mode:soft-light; pointer-events:none;
  }

  /* slight lamp glow on right side (to match room art) */
  .shelf:after{
    content:"";
    position:absolute; right:-10%; top:-10%;
    width:60%; height:140%;
    background: radial-gradient(500px 280px at 80% 35%, rgba(255,183,120,.18), transparent 65%);
    pointer-events:none;
  }

  /* Book spines */
  .book{
    --h: 168px;              /* height */
    height:var(--h);
    width:54px;
    border-radius:8px;
    display:flex; align-items:center; justify-content:center;
    transform-origin:bottom center;
    cursor:pointer; user-select:none;
    position:relative;
    box-shadow:
      0 8px 14px rgba(0,0,0,.35),
      inset 0 1px 0 rgba(255,255,255,.18),
      inset 0 -8px 12px rgba(0,0,0,.15);
    transition: transform .18s ease, filter .18s ease;
  }
  .book:hover{ transform: translateY(-4px) rotate(-1deg) }
  .book span{
    writing-mode:vertical-rl; text-orientation:mixed;
    transform:rotate(180deg);
    color:#f4f7ff; font-weight:700; letter-spacing:.4px;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  /* foil line + worn edges */
  .book:before{
    content:"";
    position:absolute; inset:8px auto 8px 6px; width:3px; border-radius:2px;
    background:linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.05));
    opacity:.7; pointer-events:none;
  }
  .book:after{
    content:"";
    position:absolute; inset:0; border-radius:8px;
    background:linear-gradient(180deg, transparent, rgba(0,0,0,.25));
    mix-blend-mode:multiply; pointer-events:none;
  }

  /* Palette â€“ muted, storybooky */
  .c-blue   { background: linear-gradient(180deg,#4468b7,#2c4a8f) }
  .c-purple { background: linear-gradient(180deg,#6b58a9,#4b3e85) }
  .c-green  { background: linear-gradient(180deg,#4e8b5e,#386b47) }
  .c-amber  { background: linear-gradient(180deg,#b08a48,#8a6a3a) }
  .c-teal   { background: linear-gradient(180deg,#3a8e8b,#2e6e6b) }
  .c-rose   { background: linear-gradient(180deg,#a95c67,#80444f) }

  /* Book-of-the-day ribbon */
  .ribbon{
    position:absolute; top:-8px; left:8px;
    background:#e9c46a; color:#3b2f1e; font-weight:700;
    padding:4px 8px; border-radius:6px 6px 2px 2px; font-size:12px;
    box-shadow:0 6px 10px rgba(0,0,0,.25);
    transform:rotate(-6deg);
  }

  /* Paper card */
  .card{
    position:fixed; inset:auto auto 40px 50%;
    translate:-50% 0;
    width:min(720px, 92vw);
    background:
      linear-gradient(180deg, var(--paper), var(--paper-edge)),
      repeating-linear-gradient(90deg, rgba(0,0,0,.02) 0, rgba(0,0,0,.02) 2px, transparent 2px, transparent 6px);
    color:#2a241a;
    border-radius:14px; padding:18px 18px 14px;
    box-shadow: 0 28px 60px rgba(0,0,0,.55), 0 2px 0 rgba(255,255,255,.35) inset;
    display:none;
  }
  .card.open{ display:block; animation:pop .14s ease-out }
  @keyframes pop{ from{ transform:scale(.98); opacity:0 } to{ transform:scale(1); opacity:1 } }

  .card h2{ margin:.2rem 0 .35rem; font-family:"Literata", serif; font-weight:600 }
  .meta{ color:#4a4031; margin-bottom:.5rem; font-family:"Literata", serif; font-size:.98rem }
  .syn{ font-family:"Patrick Hand", ui-rounded, system-ui; color:#2d261b; font-size:1.1rem; line-height:1.35 }
  .card .row{ display:flex; gap:8px; margin-top:12px; flex-wrap:wrap }
  .tag{
    background:#efe6cf; color:#54462e; border:1px dashed #cbbd9e;
    padding:6px 10px; border-radius:999px; font-family:"Patrick Hand";
  }
  .close{
    margin-left:auto; background:#1c2432; color:#dce3f3; border:none;
    padding:10px 14px; border-radius:10px; cursor:pointer;
    box-shadow:0 8px 14px rgba(0,0,0,.25);
  }

  /* Little props on shelf for vibe */
  .prop-plant{
    width:64px; height:64px; position:absolute; right:22px; bottom:158px; pointer-events:none;
    filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));
    background:
      radial-gradient(10px 8px at 50% 90%, #6b4a2e 60%, transparent 61%),
      radial-gradient(12px 8px at 50% 98%, rgba(0,0,0,.35), transparent 60%);
  }
  .prop-plant:before,
  .prop-plant:after{
    content:""; position:absolute; inset:auto; left:50%;
    width:70px; height:70px; translate:-50% 0;
    background:
      radial-gradient(60% 60% at 30% 0%, #2a5e3e, transparent 60%),
      radial-gradient(60% 60% at 70% 30%, #346e4b, transparent 60%),
      radial-gradient(60% 60% at 45% 80%, #244f36, transparent 60%);
    border-radius:50%;
    filter:blur(.4px) saturate(1.05);
  }
  .prop-plant:after{ translate:-50% 8px; opacity:.8 }

  /* helper */
  .spacer{flex:1}
  .count{ color:var(--muted); font-size:.9rem }
</style>
</head>
<body>

  <div class="toolbar">
    <div class="title">ðŸ“š Deluxe Bookshelf</div>
    <input id="q" class="field" placeholder="Search booksâ€¦ ( / )" />
    <select id="sort">
      <option value="title">Sort: Title</option>
      <option value="author">Sort: Author</option>
    </select>
    <button class="btn" id="shuffle">Shuffle</button>
    <div class="spacer"></div>
    <div class="count" id="count"></div>
  </div>

  <div class="shelf-wrap">
    <div class="shelf" id="shelf">
      <!-- plant prop -->
      <div class="prop-plant" aria-hidden="true"></div>
      <!-- books injected here -->
    </div>
  </div>

  <!-- Paper card -->
  <div id="card" class="card" role="dialog" aria-modal="true">
    <div style="display:flex; align-items:center; gap:12px">
      <h2 id="c-title">Title</h2>
      <span class="meta" id="c-author"></span>
      <button class="close" id="close">Close</button>
    </div>
    <p class="syn" id="c-syn"></p>
    <div class="row" id="c-tags"></div>
  </div>

<script>
  // Books â€” from your laptop list + one-sentence synopses
  const BOOKS = [
    {
      title: "Diary of a Wimpy Kid",
      author: "Jeff Kinney",
      color: "c-rose",
      tags: ["Middle school", "Humor"],
      synopsis: "Greg Heffley chronicles the painfully funny chaos of middle school through doodles and deadpan snark."
    },
    {
      title: "Harry Potter and the Sorcerer's Stone",
      author: "J.K. Rowling",
      color: "c-blue",
      tags: ["Magic school", "Adventure"],
      synopsis: "An orphan discovers heâ€™s a wizard and enters a hidden world where his first year at Hogwarts unveils a dangerous secret."
    },
    {
      title: "The Lightning Thief",
      author: "Rick Riordan",
      color: "c-purple",
      tags: ["Greek gods", "Quest"],
      synopsis: "Percy Jackson learns heâ€™s Poseidonâ€™s son and races across America to stop a divine war among the Olympians."
    },
    {
      title: "Wings of Fire: The Dragonet Prophecy",
      author: "Tui T. Sutherland",
      color: "c-green",
      tags: ["Dragons", "Destiny"],
      synopsis: "Five young dragonets foretold to end a brutal war must decide whether to follow the prophecyâ€”or forge their own path."
    },
    {
      title: "Jurassic Park",
      author: "Michael Crichton",
      color: "c-amber",
      tags: ["Sciâ€‘fi", "Thriller"],
      synopsis: "A theme park of cloned dinosaurs descends into terror when systems fail and nature proves impossible to control."
    },
    {
      title: "Big Nate",
      author: "Lincoln Peirce",
      color: "c-teal",
      tags: ["Comics", "School"],
      synopsis: "A wisecracking sixth grader turns everyday disasters into laugh-out-loud adventures with friends, teachers, and trouble."
    }
  ];

  // DOM shortcuts
  const shelf = document.getElementById('shelf');
  const q = document.getElementById('q');
  const sortSel = document.getElementById('sort');
  const shuffleBtn = document.getElementById('shuffle');
  const countEl = document.getElementById('count');
  const card = document.getElementById('card');
  const cTitle = document.getElementById('c-title');
  const cAuthor = document.getElementById('c-author');
  const cSyn = document.getElementById('c-syn');
  const cTags = document.getElementById('c-tags');
  const closeBtn = document.getElementById('close');

  let state = { books:[...BOOKS], q:"", sort:"title" };

  function render(){
    const qlc = state.q.trim().toLowerCase();
    let list = [...state.books]
      .filter(b => !qlc || b.title.toLowerCase().includes(qlc) || b.author.toLowerCase().includes(qlc));

    list.sort((a,b)=>{
      const key = state.sort;
      return String(a[key]).localeCompare(String(b[key]));
    });

    shelf.querySelectorAll('.book').forEach(n=>n.remove());

    list.forEach((b,i)=>{
      const el = document.createElement('div');
      el.className = `book ${b.color}`;
      el.title = `${b.title} â€” ${b.author}`;
      el.dataset.idx = BOOKS.indexOf(b);
      const span = document.createElement('span');
      span.textContent = b.title;
      el.appendChild(span);
      shelf.appendChild(el);
    });

    // Book of the Day ribbon
    shelf.querySelectorAll('.ribbon').forEach(n=>n.remove());
    const pick = Math.floor((Date.now()/86400000) % list.length);
    const chosen = shelf.querySelectorAll('.book')[pick];
    if(chosen){
      const rb = document.createElement('div');
      rb.className = 'ribbon';
      rb.textContent = 'Book of the Day';
      chosen.appendChild(rb);
    }

    countEl.textContent = `${list.length} book${list.length!==1?'s':''}`;
  }

  function openCard(b){
    cTitle.textContent = b.title;
    cAuthor.textContent = `by ${b.author}`;
    cSyn.textContent = b.synopsis;
    cTags.innerHTML = '';
    (b.tags||[]).forEach(t=>{
      const tag = document.createElement('div');
      tag.className = 'tag'; tag.textContent = t; cTags.appendChild(tag);
    });
    card.classList.add('open');
  }

  shelf.addEventListener('click', (e)=>{
    const el = e.target.closest('.book');
    if(!el) return;
    openCard(BOOKS[Number(el.dataset.idx)]);
  });

  closeBtn.addEventListener('click', ()=> card.classList.remove('open'));
  card.addEventListener('click', (e)=>{ if(e.target===card) card.classList.remove('open') });

  q.addEventListener('input', ()=>{ state.q = q.value; render() });
  sortSel.addEventListener('change', ()=>{ state.sort = sortSel.value; render() });
  shuffleBtn.addEventListener('click', ()=>{
    // Fisherâ€“Yates
    for(let i=state.books.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [state.books[i],state.books[j]]=[state.books[j],state.books[i]];
    }
    render();
  });

  // Keyboard: "/" to focus search, Esc to close card
  window.addEventListener('keydown', (e)=>{
    if(e.key === '/'){ e.preventDefault(); q.focus() }
    if(e.key === 'Escape'){ card.classList.remove('open') }
  });

  render();
</script>
</body>
</html>
